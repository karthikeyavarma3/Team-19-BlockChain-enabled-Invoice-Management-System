<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice System</title>
    <!-- Include the web3.js library -->
    <script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>
    <!-- Include your JavaScript file (assuming it's named app.js) -->
    <script src="app.js"></script>
</head>
<body>
    <h1>Invoice System</h1>

    <!-- Create Invoice Form -->
    <div>
        <label for="inputCustomer">Customer Wallet:</label>
        <input type="text" id="inputCustomer" placeholder="Enter customer wallet address">
    </div>
    <div>
        <label for="inputAmount">Amount:</label>
        <input type="text" id="inputAmount" placeholder="Enter amount">
    </div>
    <div>
        <label for="inputDueDate">Due Date (YYYY-MM-DD):</label>
        <input type="text" id="inputDueDate" placeholder="Enter due date">
    </div>
    <div>
        <label for="inputComments">Comments:</label>
        <input type="text" id="inputComments" placeholder="Enter comments">
    </div>
    <button class="create-invoice" onclick="createInvoice()">Create Invoice</button>

    <!-- Get Invoice Details Form -->
    <div>
        <label for="inputInvoiceId">Invoice ID:</label>
        <input type="text" id="inputInvoiceId" placeholder="Enter invoice ID">
    </div>
    <button class="get-invoice" onclick="getInvoiceDetails()">Get Invoice Details</button>

    <!-- Pay Invoice Form -->
    <div>
        <label for="inputPaymentAmount">Payment Amount (ETH):</label>
        <input type="text" id="inputPaymentAmount" placeholder="Enter payment amount">
    </div>
    <button class="pay-invoice" onclick="payInvoice()">Pay Invoice</button>

    <!-- Payment Status -->
    <div>
        <p id="paymentStatus"></p>
    </div>

    <script>
        // Connect to MetaMask
        async function connectToMetaMask() {
            if (window.ethereum) {
                try {
                    // Request account access
                    await window.ethereum.request({ method: "eth_requestAccounts" });
                    console.log("Connected to MetaMask");
                } catch (error) {
                    console.error("User denied account access");
                }
            } else {
                console.error("MetaMask not found. Please install MetaMask.");
            }
        }

        // Call the connectToMetaMask function when the page loads
        window.onload = connectToMetaMask;
    </script>
</body>
</html>
